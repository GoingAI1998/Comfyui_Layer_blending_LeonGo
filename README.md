# Comfyui_Layer_blending_LeonGo
At present, I have not used the useful comfyui custom node about layer mixing, and I have written a comfyui runtime automatic pop-up window for layer editing node
# ComfyUI Web Canvas Node


æƒ³äº†å¾ˆä¹…ï¼Œè¿™ä¸ªé¡¹ç›®å°±å«ï¼ŒlayersDicccï¼Œå“¦ç®—äº†ï¼Œimgcanvaså§ã€‚
ä¸€ä¸ªç”¨äº ComfyUI çš„äº¤äº’å¼å›¾åƒç¼–è¾‘èŠ‚ç‚¹æ‰©å±•ï¼Œæä¾›äº†ç›´è§‚çš„ Web ç”»å¸ƒç•Œé¢ï¼Œæ”¯æŒå›¾åƒçš„å®æ—¶ç¼–è¾‘ã€æ··åˆå’Œè’™ç‰ˆæ“ä½œã€‚
épyqté¡¹ç›®ï¼Œé‰´äºmacosä¸Šè¿è¡Œpyqté¡¹ç›®æ€»æ˜¯è«åå…¶å¦™å‡ºç°ä¸€å †é—®é¢˜ï¼Œæˆ‘ä½¿ç”¨jså’Œpythonåå°è¿›è¡Œäº†å‰åç«¯é¡¹ç›®çš„é‡æ„ã€‚
![image](https://github.com/user-attachments/assets/d29309f4-815c-4ac7-9faa-9b11bac019c9)

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ–¼ï¸ äº¤äº’å¼å›¾åƒç¼–è¾‘ç•Œé¢
- ğŸ”„ å®æ—¶å›¾åƒå˜æ¢
  - ç¼©æ”¾
  - æ—‹è½¬
  - ä½ç§»
- ğŸ­ è‡ªåŠ¨è’™ç‰ˆç”Ÿæˆ
- ğŸ‘† ç›´è§‚çš„æ‹–æ‹½æ§åˆ¶
- âŒ¨ï¸ å¿«æ·é”®æ”¯æŒ
- ğŸ¨ é€æ˜åº¦è°ƒèŠ‚
- ğŸ“ ç²¾ç¡®çš„å˜æ¢æ§åˆ¶

## å®‰è£…æ–¹æ³•

1. è¿›å…¥ ComfyUI çš„ `custom_nodes` ç›®å½•
2. å…‹éš†æœ¬ä»“åº“ï¼š
```bash
git clone [repository_url] 
```
3. é‡å¯ ComfyUI

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨æµç¨‹

1. åœ¨èŠ‚ç‚¹å›¾ä¸­æ·»åŠ  "Web Canvas" èŠ‚ç‚¹
2. è¿æ¥è¾“å…¥ï¼š
   - `back_image`: èƒŒæ™¯å›¾åƒ
   - `fore_image`: å‰æ™¯å›¾åƒ
   - `fore_mask`(å¯é€‰): å‰æ™¯è’™ç‰ˆ
   - `seed`: éšæœºç§å­å€¼

### ç•Œé¢æ§åˆ¶

- **å˜æ¢æ§åˆ¶**ï¼š
  - æ‹–æ‹½å›¾åƒä¸­å¿ƒè¿›è¡Œä½ç§»
  - æ‹–æ‹½è§’ç‚¹è¿›è¡Œç¼©æ”¾
  - æ‹–æ‹½é¡¶éƒ¨æ—‹è½¬æ‰‹æŸ„è¿›è¡Œæ—‹è½¬
  - æŒ‰ä½ Shift é”®å¯è¿›è¡Œç²¾ç¡®æ§åˆ¶ï¼ˆ15åº¦æ—‹è½¬å¸é™„/ç­‰æ¯”ä¾‹ç¼©æ”¾ï¼‰

- **å·¥å…·æŒ‰é’®**ï¼š
  - é‡ç½®å˜æ¢
  - è®¾ç½®ç¼©æ”¾æ¯”ä¾‹
  - è°ƒèŠ‚é€æ˜åº¦
  - ç¡®è®¤/å–æ¶ˆç¼–è¾‘

- **å¿«æ·é”®**ï¼š
  - `R`: é‡ç½®å˜æ¢
  - `â†`/`â†’`: æ—‹è½¬è°ƒæ•´
  - `+`/`-`: ç¼©æ”¾è°ƒæ•´
  - `Enter`: ç¡®è®¤ç¼–è¾‘
  - `Esc`: å–æ¶ˆç¼–è¾‘

## æŠ€æœ¯ç»†èŠ‚

### èŠ‚ç‚¹è¾“å…¥è¾“å‡º

- **è¾“å…¥**ï¼š
  - `back_image`: IMAGE ç±»å‹ï¼ŒèƒŒæ™¯å›¾åƒ
  - `fore_image`: IMAGE ç±»å‹ï¼Œå‰æ™¯å›¾åƒ
  - `fore_mask`: MASK ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼Œå‰æ™¯è’™ç‰ˆ
  - `seed`: INT ç±»å‹ï¼Œéšæœºç§å­å€¼

- **è¾“å‡º**ï¼š
  - `image`: IMAGE ç±»å‹ï¼Œç¼–è¾‘åçš„å›¾åƒ
  - `mask`: MASK ç±»å‹ï¼Œç”Ÿæˆçš„è’™ç‰ˆ

### ä¸»è¦ç»„ä»¶

- `WebCanvasNode`: æ ¸å¿ƒèŠ‚ç‚¹ç±»ï¼Œå¤„ç†å›¾åƒå¤„ç†å’Œæ•°æ®æµ
- `TransformBox`: å‰ç«¯å˜æ¢æ§åˆ¶ç»„ä»¶ï¼Œå¤„ç†ç”¨æˆ·äº¤äº’
- `dialog.js`: Web ç•Œé¢å®ç°ï¼ŒåŒ…å«æ‰€æœ‰äº¤äº’é€»è¾‘

## æ³¨æ„äº‹é¡¹

1. å›¾åƒç¼–è¾‘ä¼šåœ¨æµè§ˆå™¨ä¸­è¿›è¡Œï¼Œç¡®ä¿æœ‰è¶³å¤Ÿçš„å†…å­˜
2. ç¼–è¾‘è¶…æ—¶æ—¶é—´ä¸º 60 ç§’ï¼Œè¯·åœ¨æ­¤æ—¶é—´å†…å®Œæˆç¼–è¾‘
3. æ‰€æœ‰å˜æ¢æ“ä½œéƒ½æ˜¯å¯é€†çš„ï¼Œå¯ä»¥éšæ—¶é‡ç½®æˆ–å–æ¶ˆ

## è´¡çŒ®æŒ‡å—
æ„Ÿè°¢å‰è¾ˆçš„ä¸€äº›æºä»£ç è´¡çŒ®ï¼Œå®åœ¨å¿˜è®°äº†å“ªä¸ªé¡¹ç›®ã€‚

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. ä»£ç é£æ ¼ä¿æŒä¸€è‡´
2. æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
3. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

## è®¸å¯è¯

[è®¸å¯è¯ç±»å‹]

## æ›´æ–°æ—¥å¿—

## æ¬¢è¿è¯·æˆ‘å–è±†æµ†ï¼Œè°¢è°¢

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®ç°åŸºæœ¬çš„å›¾åƒç¼–è¾‘åŠŸèƒ½
- æ·»åŠ äº¤äº’å¼ Web ç•Œé¢
![image](https://github.com/user-attachments/assets/3e0d40ba-65ff-4fae-9c3d-c27099a23107)
![image](https://github.com/user-attachments/assets/7a155747-be10-4017-8da9-4e13af923dc5)
![image](https://github.com/user-attachments/assets/46724ae2-9866-4326-a25e-9a44e78282c0)



# å½“ç„¶æˆ‘è¿˜åšäº†ä¸€ä¸ªä¸“ä¸šçš„å¤§æ¯ç‰ˆæœ¬ï¼Œæ”¯æŒ10å¼ å›¾çš„è‡ªç”±æ··åˆï¼Œå›¾å±‚é¡ºåºæŒ‘æ¢ï¼Œç­‰ç­‰ç­‰åŠŸèƒ½ã€‚
![image](https://github.com/user-attachments/assets/db851ad3-cea2-4b53-aadc-d1b61501647b)
![image](https://github.com/user-attachments/assets/70769a18-9f1b-4ccd-9e36-12f3c96b77b0)
![image](https://github.com/user-attachments/assets/32f4f6a8-06bd-4c6a-85f8-0e72f17db764)

